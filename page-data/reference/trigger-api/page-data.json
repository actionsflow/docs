{"componentChunkName":"component---src-templates-docs-js","path":"/reference/trigger-api/","result":{"data":{"site":{"siteMetadata":{"title":"Actionsflow Documentation","docsLocation":"https://github.com/actionsflow/actionsflow/tree/main"}},"mdx":{"fields":{"id":"a4baf473-3003-51b9-bf74-24dd104855fc","title":"Trigger API","slug":"/reference/trigger-api/"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Trigger API\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Triggers determines whether a workflow should start running.\"), mdx(\"p\", null, \"Actionsflow call every trigger in a timed loop, or when a webhook event of the trigger comes, Actionsflow will call the trigger's webhook handler. The trigger just need to return it's data, Actionsflow will handle the deduplication, cache, and run workflow.\"), mdx(\"p\", null, \"A trigger should export a class that implements trigger interface, a simple example of trigger looks like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"module.exports = class Example {\\n  constructor({ helpers, options }) {\\n    this.options = options;\\n    this.helpers = helpers;\\n  }\\n  async run() {\\n    const items = [\\n      {\\n        id: \\\"uniqueId\\\",\\n        title: \\\"hello world title\\\",\\n      },\\n      {\\n        id: \\\"uniqueId2\\\",\\n        title: \\\"hello world title2\\\",\\n      },\\n    ];\\n    return items;\\n  }\\n};\\n\")), mdx(\"p\", null, \"See the trigger class declaration:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface ITriggerClassType {\\n  config?: ITriggerGeneralConfigOptions;\\n  getItemKey?: (item: AnyObject) => string;\\n  run?(): Promise<ITriggerResult> | ITriggerResult;\\n  webhooks?: IWebhook[];\\n}\\n\")), mdx(\"p\", null, \"You can look the whole declarations at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/actionsflow/actionsflow/blob/main/packages/actionsflow-core/src/interface.ts\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"here\")), mdx(\"h1\", {\n    \"id\": \"constructor\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"href\": \"#constructor\",\n    \"aria-label\": \"constructor permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h1\"\n  }, \"constructor\")), mdx(\"p\", null, \"Actionsflow construct your trigger class with the following params:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface ITriggerContructorParams {\\n  options: ITriggerOptions;\\n  helpers: IHelpers;\\n  workflow: IWorkflow;\\n}\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"options\"), \" is the trigger options by user defining, the default value is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{}\"), \", it can be the following values:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface ITriggerOptions extends AnyObject {\\n  config?: ITriggerGeneralConfigOptions;\\n}\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config\"), \" is the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../workflow/#ontriggerconfig\"\n  }), \"general options for Actionsflow trigger\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config\"), \" are handled by Actionsflow, you can change the default config by change the instance \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config\"), \" value, learn more about changing the default\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config\"), \" see \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#config\"\n  }), \"here\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config\"), \" interface:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface ITriggerGeneralConfigOptions {\\n  every?: number | string;\\n  timeZone?: string;\\n  shouldDeduplicate?: boolean;\\n  manualRunEvent?: ManualRunTriggerEventType | ManualRunTriggerEventType[];\\n  skipSchedule?: boolean;\\n  debug?: boolean;\\n  skipFirst?: boolean;\\n  force?: boolean;\\n  logLevel?: LogLevelDesc;\\n  active?: boolean;\\n  buildOutputsOnError?: boolean;\\n  skipOnError?: boolean;\\n  filter?: AnyObject;\\n  filterOutputs?: AnyObject;\\n  format?: string;\\n  skip?: number;\\n  limit?: number;\\n  sort?: AnyObject;\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"helpers\"), \" is a collection of the commonly used utils for trigger, including \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cache\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"log\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"axios\"), \", look at the interface declaration:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface IHelpers {\\n  createContentDigest: (input: unknown) => string;\\n  cache: {\\n    get: (key: string) => Promise<unknown>;\\n    set: (key: string, value: unknown) => Promise<unknown>;\\n    del: (key: string) => Promise<void>;\\n    reset: () => Promise<void>;\\n  };\\n  log: Logger;\\n  axios: AxiosStatic;\\n  formatBinary: (\\n    content: Buffer,\\n    filePath?: string,\\n    mimeType?: string\\n  ) => Promise<IBinaryData>;\\n}\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Learn more about helpers, see \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../reference/trigger-helpers/\"\n  }), \"Trigger Helpers API\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"workflow\"), \", is the current workflow who use the trigger, including \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"path\"), \": the workflow absolute path, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"relativePath\"), \": the workflow relative path, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data\"), \", the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../workflow/\"\n  }), \"workflow\"), \" data in JSON object.\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface IWorkflow {\\n  path: string;\\n  relativePath: string;\\n  data: IWorkflowData;\\n}\\n\")))), mdx(\"h1\", {\n    \"id\": \"run\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"href\": \"#run\",\n    \"aria-label\": \"run permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h1\"\n  }, \"run\")), mdx(\"p\", null, \"Actionsflow call the trigger's instance \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"run\"), \" method in a timed loop, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"run\"), \" method should return an object which looks like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"[\\n  {\\n    id: \\\"uniqueId\\\",\\n    title: \\\"title\\\",\\n  },\\n];\\n\")), mdx(\"p\", null, \"By default, Actionsflow will deduplicate your results by using the deduplication key \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"item.id\"), \", if the item key \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" not exist, then Actionsflow will hash the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"item\"), \" data to deduplication. If you don't want to deduplicate your data, then your should set the trigger instance property \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config\"), \" as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{shouldDeduplicate:true}\"), \". You can also set \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getItemKey\"), \" method to return the item's deduplication key.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note: if your trigger only handle \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#webhooks\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"webhook\")), \" event, you can ignore this method.\")), mdx(\"h1\", {\n    \"id\": \"config\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"href\": \"#config\",\n    \"aria-label\": \"config permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h1\"\n  }, \"config\")), mdx(\"p\", null, \"optional, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ITriggerGeneralConfigOptions\"), \", you can change the default config by provide \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"interface ITriggerGeneralConfigOptions {\\n  every?: number | string;\\n  timeZone?: string;\\n  shouldDeduplicate?: boolean;\\n  manualRunEvent?: ManualRunTriggerEventType | ManualRunTriggerEventType[];\\n  skipSchedule?: boolean;\\n  debug?: boolean;\\n  skipFirst?: boolean;\\n  force?: boolean;\\n  logLevel?: LogLevelDesc;\\n  active?: boolean;\\n  buildOutputsOnError?: boolean;\\n  skipOnError?: boolean;\\n  filter?: AnyObject;\\n  filterOutputs?: AnyObject;\\n  format?: string;\\n  skip?: number;\\n  limit?: number;\\n  sort?: AnyObject;\\n}\\n\")), mdx(\"p\", null, \"Learn more about config field meaning, see \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../workflow/#ontriggerconfig\"\n  }), \"general options for Actionsflow trigger\")), mdx(\"p\", null, \"The default value is:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"every\\\": 0,\\n  \\\"shouldDeduplicate\\\": true,\\n  \\\"skipFirst\\\": false,\\n  \\\"force\\\": false,\\n  \\\"logLevel\\\": \\\"info\\\",\\n  \\\"active\\\": true,\\n  \\\"skipOnError\\\": false,\\n  \\\"buildOutputsOnError\\\": false,\\n  \\\"timeZone\\\": \\\"UTC\\\",\\n  \\\"shouldRunManually\\\": true,\\n  \\\"manualRunEvent\\\": []\\n}\\n\")), mdx(\"p\", null, \"You can set one or more config option to change the default value. For example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"module.exports = class Example {\\n  constructor({ helpers, options }) {\\n    this.options = options;\\n    this.helpers = helpers;\\n  }\\n  config = {\\n    limit: 15,\\n  };\\n  async run() {\\n    const items = [\\n      {\\n        id: \\\"uniqueId\\\",\\n        title: \\\"hello world title\\\",\\n      },\\n      {\\n        id: \\\"uniqueId2\\\",\\n        title: \\\"hello world title2\\\",\\n      },\\n    ];\\n    return items;\\n  }\\n};\\n\")), mdx(\"h1\", {\n    \"id\": \"getitemkey\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"href\": \"#getitemkey\",\n    \"aria-label\": \"getitemkey permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h1\"\n  }, \"getItemKey\")), mdx(\"p\", null, \"Optional, a hook \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"function\"), \", when \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.shouldDeduplicate\"), \" is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \"(the default value for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"shouldDeduplicate\"), \" is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \"), we use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getItemKey\"), \" to specify the deduplication key. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getItemKey\"), \" receives \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"item\"), \" as input, return a string of deduplication key.\"), mdx(\"p\", null, \"If you don't provide the method, Actionsflow fallback to looking for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"key\"), \", if neither are supplied, Actionsflow will hash the item, and generate a unique key.\"), mdx(\"h1\", {\n    \"id\": \"webhooks\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"href\": \"#webhooks\",\n    \"aria-label\": \"webhooks permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h1\"\n  }, \"webhooks\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"module.exports = class Example {\\n  webhooks = [\\n    {\\n      path: \\\"/\\\",\\n      method: \\\"post\\\",\\n      handler: (request) => {\\n        let items = [request.body];\\n        return items;\\n      },\\n    },\\n  ];\\n};\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webhooks\"), \" define a group of webhook handlers. When a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../webhook/\"\n  }), \"webhook event\"), \" of the trigger comes, the handler will be called with the webhook request.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note: If you don't familiar with Actionsflow webhook URL format, please see \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../../webhook/\"\n  }), \"here\"))), mdx(\"p\", null, \"The following interface is a webhook interface:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface IWebhook {\\n  path?: string;\\n  method?: string | string[];\\n  getItemKey?: (item: AnyObject) => string;\\n  handler: IWebhookHandler;\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"webhookpath\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#webhookpath\",\n    \"aria-label\": \"webhookpath permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"webhook.path\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"path\"), \" is using to set the webhook path. if \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"path\"), \" provided, then only the webhook URL matched the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"path\"), \" will call the handler.\"), mdx(\"p\", null, \"If you only handle one webhook path, then you can provide \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"handler\"), \" method only. All webhook event to the trigger will call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"handler\"), \".\"), mdx(\"p\", null, \"Generally, most of triggers only handle one path. But if your trigger need to handle more than one path, you should set different paths to handle the webhook event.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://webhook.actionsflow.workers.dev/<owner>/<repo>/<workflow-file-name>/<trigger-name>\"), \" is the fixed prefix for webhook URL, so you just need to define the path after the prefix. For example, if you set path as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/webhook\"), \", then, only \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://webhook.actionsflow.workers.dev/<owner>/<repo>/<workflow-file-name>/<trigger-name>/webhook\"), \" will call your webhook handler.\"), mdx(\"p\", null, \"You can also use params path to define your path, like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/user/:user_id\"), \", Actionsflow use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/pillarjs/path-to-regexp\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"path-to-regexp\"), \" to handle route.\"), mdx(\"h2\", {\n    \"id\": \"webhookmethod\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#webhookmethod\",\n    \"aria-label\": \"webhookmethod permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"webhook.method\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"method\"), \" is using to set the webhook method, it can be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"string\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"string[]\"), \", if provided, only specific methods will call the handler. the default value is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"undefined\"), \", means all methods request will call the handler.\"), mdx(\"h2\", {\n    \"id\": \"webhookgetitemkey\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#webhookgetitemkey\",\n    \"aria-label\": \"webhookgetitemkey permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"webhook.getItemKey\")), mdx(\"p\", null, \"Like the trigger instance method \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#getItemKey\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"getItemKey\")), \", you can specify the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getItemKey\"), \" for the webhook. If not provided, Actionsflow will fallback to use the instance's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getItemKey\"), \".\"), mdx(\"h2\", {\n    \"id\": \"webhookhandler\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#webhookhandler\",\n    \"aria-label\": \"webhookhandler permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"webhook.handler\")), mdx(\"p\", null, \"Required, a hook function that be called when the webhook event comes. It receives a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"request\"), \" as input, which has the following properties:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface IWebhookRequest {\\n  method: HTTP_METHODS_LOWERCASE;\\n  headers: Record<string, string>;\\n  originPath: string;\\n  path: string;\\n  query: ParsedUrlQuery;\\n  querystring: string;\\n  search: string;\\n  params: AnyObject;\\n  body?: string | AnyObject | undefined;\\n  searchParams: URLSearchParams;\\n  URL: URL;\\n}\\n\")), mdx(\"p\", null, \"When the webhook payload \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"body\"), \" is a JSON string, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"body\"), \" will be converted javascript object automatically.\"), mdx(\"p\", null, \"Like \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#run\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"run\")), \", The handler also should return an array which looks like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"[\\n  {\\n    id: \\\"uniqueId\\\",\\n    title: \\\"title\\\",\\n  },\\n];\\n\")), mdx(\"h1\", {\n    \"id\": \"more-examples\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"href\": \"#more-examples\",\n    \"aria-label\": \"more examples permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"More Examples\"), mdx(\"p\", null, \"Learn more about trigger examples, see:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/actionsflow/actionsflow/blob/main/packages/actionsflow/src/triggers/rss.ts\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"View RSS trigger on Github\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/actionsflow/actionsflow/blob/main/packages/actionsflow/src/triggers/poll.ts\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"View Poll trigger on Github\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/actionsflow/actionsflow/tree/main/packages/actionsflow-trigger-telegram_bot\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"View Telegram Bot trigger on Github\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/actionsflow/actionsflow/tree/main/packages/actionsflow-trigger-twitter\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"View Twitter trigger on Github\"))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#constructor","title":"constructor"},{"url":"#run","title":"run"},{"url":"#config","title":"config"},{"url":"#getitemkey","title":"getItemKey"},{"url":"#webhooks","title":"webhooks","items":[{"url":"#webhookpath","title":"webhook.path"},{"url":"#webhookmethod","title":"webhook.method"},{"url":"#webhookgetitemkey","title":"webhook.getItemKey"},{"url":"#webhookhandler","title":"webhook.handler"}]},{"url":"#more-examples","title":"More Examples"}]},"parent":{"__typename":"File","relativePath":"docs/reference/trigger-api.md"},"frontmatter":{"title":"Trigger API","metaTitle":null,"metaDescription":null,"githubEditLink":null}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/about/","title":"About"}}},{"node":{"fields":{"slug":"/actions/","title":"Explore Actions"}}},{"node":{"fields":{"slug":"/compare/","title":"Compare with Zapier & IFTTT"}}},{"node":{"fields":{"slug":"/concepts/","title":"Core Concepts"}}},{"node":{"fields":{"slug":"/contributing/","title":"Contributing Guide"}}},{"node":{"fields":{"slug":"/creating-triggers/","title":"Creating Triggers"}}},{"node":{"fields":{"slug":"/faqs/","title":"FAQs"}}},{"node":{"fields":{"slug":"/getting-started/","title":"Getting Started"}}},{"node":{"fields":{"slug":"/","title":"Introduction"}}},{"node":{"fields":{"slug":"/reference/","title":"Reference"}}},{"node":{"fields":{"slug":"/self-hosted/","title":"Self-Hosted Introduction"}}},{"node":{"fields":{"slug":"/triggers/","title":"Triggers"}}},{"node":{"fields":{"slug":"/upgrade/","title":"Upgrade"}}},{"node":{"fields":{"slug":"/webhook/","title":"Webhook Syntax"}}},{"node":{"fields":{"slug":"/workflow/","title":"Workflow Syntax"}}},{"node":{"fields":{"slug":"/creating-triggers/creating-a-generic-trigger/","title":"Generic Trigger"}}},{"node":{"fields":{"slug":"/creating-triggers/creating-a-local-trigger/","title":"Local Trigger"}}},{"node":{"fields":{"slug":"/reference/actionsflow-api/","title":"Package actionsflow API"}}},{"node":{"fields":{"slug":"/reference/cli/","title":"CLI API"}}},{"node":{"fields":{"slug":"/reference/github-workflow/","title":"Actionsflow Github Workflows"}}},{"node":{"fields":{"slug":"/reference/trigger-api/","title":"Trigger API"}}},{"node":{"fields":{"slug":"/reference/trigger-helpers/","title":"Trigger Helpers API"}}},{"node":{"fields":{"slug":"/triggers/email/","title":"Email"}}},{"node":{"fields":{"slug":"/triggers/graphql/","title":"Graphql"}}},{"node":{"fields":{"slug":"/triggers/poll/","title":"Poll"}}},{"node":{"fields":{"slug":"/triggers/rss/","title":"RSS"}}},{"node":{"fields":{"slug":"/triggers/script/","title":"Script"}}},{"node":{"fields":{"slug":"/triggers/webhook/","title":"Webhook"}}},{"node":{"fields":{"slug":"/reference/actionsflow-core-api/","title":"Package actionsflow-core API"}}},{"node":{"fields":{"slug":"/triggers/aws_sns/","title":"Aws_sns"}}},{"node":{"fields":{"slug":"/triggers/google_form/","title":"Google_form"}}},{"node":{"fields":{"slug":"/triggers/instagram/","title":"Instagram"}}},{"node":{"fields":{"slug":"/triggers/npm/","title":"Npm"}}},{"node":{"fields":{"slug":"/triggers/reddit/","title":"Reddit"}}},{"node":{"fields":{"slug":"/triggers/slack/","title":"Slack"}}},{"node":{"fields":{"slug":"/triggers/telegram_bot/","title":"Telegram_bot"}}},{"node":{"fields":{"slug":"/triggers/trello/","title":"Trello"}}},{"node":{"fields":{"slug":"/triggers/twitter/","title":"Twitter"}}},{"node":{"fields":{"slug":"/triggers/typeform/","title":"Typeform"}}},{"node":{"fields":{"slug":"/triggers/weather/","title":"Weather"}}},{"node":{"fields":{"slug":"/triggers/youtube/","title":"Youtube"}}},{"node":{"fields":{"slug":"/awesome/","title":"Awesome Workflows"}}}]}},"pageContext":{"id":"a4baf473-3003-51b9-bf74-24dd104855fc"}},"staticQueryHashes":["2324354116","2619113677","3374946256"]}